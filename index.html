<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #000;
            color: #0f0;
            text-align: center;
            margin: 0;
            padding: 20px;
            transition: all 0.5s ease;
        }

        .page {
            display: none;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 2px solid #0f0;
            border-radius: 10px;
            background-color: rgba(0, 30, 0, 0.8);
            box-shadow: 0 0 20px #0f0;
        }

        .active-page {
            display: block;
        }

        h1 {
            color: #0f0;
            text-shadow: 0 0 10px #0f0;
            margin-bottom: 30px;
        }

        h2 {
            color: #0f0;
            margin-bottom: 20px;
        }

        input {
            width: 80%;
            padding: 12px;
            margin: 10px 0;
            background-color: #111;
            color: #0f0;
            border: 1px solid #0f0;
            border-radius: 5px;
            font-size: 16px;
            text-align: center;
        }

        input::placeholder {
            color: #0a0;
        }

        button {
            background-color: #000;
            color: #0f0;
            border: 2px solid #0f0;
            padding: 12px 30px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        button:hover {
            background-color: #0f0;
            color: #000;
            box-shadow: 0 0 15px #0f0;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .player-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .player-list li {
            background-color: #111;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #0a0;
            border-radius: 5px;
            color: #0f0;
        }

        .location-image {
            width: 300px;
            height: 200px;
            margin: 20px auto;
            border: 3px solid #0f0;
            border-radius: 10px;
            overflow: hidden;
            background-color: #111;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px #0f0;
            position: relative;
        }

        .location-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }

        .location-text {
            color: #0f0;
            font-size: 22px;
            font-weight: bold;
            text-shadow: 0 0 10px #0f0;
            padding: 20px;
            text-align: center;
        }

        .imposter-text {
            color: #f00;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px #f00;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .innocent-text {
            color: #0f0;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px #0f0;
        }

        .error-message {
            color: #f00;
            background-color: rgba(255, 0, 0, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            display: none;
        }

        .vote-option {
            background-color: #111;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #0f0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .vote-option:hover {
            background-color: #0a0;
            transform: scale(1.02);
        }

        .results-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }

        .results-table th, .results-table td {
            padding: 12px;
            border: 1px solid #0f0;
            text-align: center;
        }

        .results-table th {
            background-color: #0a0;
            color: #000;
        }

        .imposter {
            color: #f00;
            font-weight: bold;
            text-shadow: 0 0 10px #f00;
            animation: pulse 2s infinite;
        }

        .innocent {
            color: #0f0;
            font-weight: bold;
        }

        .status-badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            margin-left: 10px;
            font-size: 12px;
        }

        .imposter-badge {
            background-color: rgba(255, 0, 0, 0.2);
            color: #f00;
        }

        .innocent-badge {
            background-color: rgba(0, 255, 0, 0.2);
            color: #0f0;
        }

        .instructions {
            background-color: rgba(0, 30, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #0a0;
        }

        .instructions h3 {
            color: #0f0;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ -->
    <div id="page1" class="page active-page">
        <h1>ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ğŸ•µï¸â€â™‚ï¸</h1>
        <div class="instructions">
            <h3>ğŸ“‹ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„Ø¹Ø¨:</h3>
            <p>â€¢ Ø£Ø¯Ø®Ù„ Ø£Ø³Ù…Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</p>
            <p>â€¢ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰: 3 Ù„Ø§Ø¹Ø¨ÙŠÙ†</p>
            <p>â€¢ Ø³ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø¬Ø§Ø³ÙˆØ³ ÙˆØ§Ø­Ø¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹</p>
            <p>â€¢ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ù„Ø§ ÙŠØ¹Ø±Ù Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø³Ø±ÙŠ!</p>
        </div>
        <input type="text" id="playerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨">
        <button onclick="addPlayer()">â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
        <!-- Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø²Ø± ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¨Ø¹Ø¯ Ø²Ø± Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<button onclick="clearAllPlayers()" style="background-color: #300; color: #f00;">
    ğŸ—‘ï¸ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
</button>
        <div class="error-message" id="errorMessage"></div>
        
        <h3>ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†:</h3>
        <ul id="playersList" class="player-list"></ul>
        
        <button id="startGameBtn" onclick="startGame()" disabled>ğŸ® Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
    <div id="page2" class="page">
        <h1>ğŸ¯ Ø§Ù„Ø¯ÙˆØ± Ø¹Ù„ÙŠÙƒ ÙŠØ§ <span id="currentPlayer" class="innocent"></span></h1>
        <div class="instructions">
            <p>Ø³ØªØ±Ù‰ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø³Ø±ÙŠ Ø£Ùˆ Ø³ØªÙƒÙˆÙ† Ø£Ù†Øª Ø§Ù„Ø¬Ø§Ø³ÙˆØ³!</p>
            <p>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø§Ù„ØªØ§Ù„ÙŠ" Ù„ØªØ±Ù‰ Ø¯ÙˆØ±Ùƒ</p>
        </div>
        <button onclick="nextPage()">ğŸ‘‰ Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙƒØ§Ù† -->
    <div id="page3" class="page">
        <h1 id="locationMessage"></h1>
        <div class="location-image" id="locationImage">
            <div id="locationContent" class="location-text"></div>
        </div>
        <div id="playerStatus"></div>
        <button onclick="nextTurn()">ğŸ‘‰ Ø§Ù„ØªØ§Ù„ÙŠ</button>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©: Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
    <div id="page4" class="page">
        <h1>ğŸ¤” Ø§Ø³Ø£Ù„ÙˆØ§ Ø¨Ø¹Ø¶</h1>
        <div class="instructions">
            <p>â€¢ Ø§Ø³Ø£Ù„ÙˆØ§ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¹Ù† Ø§Ù„Ù…ÙƒØ§Ù†</p>
            <p>â€¢ Ø­Ø§ÙˆÙ„ÙˆØ§ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</p>
            <p>â€¢ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ ÙŠØ­Ø§ÙˆÙ„ Ø§Ù„ØªØ®ÙÙŠ</p>
            <p>â€¢ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ØŒ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø§Ù„ØªØ§Ù„ÙŠ"</p>
        </div>
        <button onclick="startVotingPhase()">ğŸ‘‰ Ø§Ù„ØªØ§Ù„ÙŠ Ù„Ù„ØªØµÙˆÙŠØª</button>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©: Ø§Ù„ØªØµÙˆÙŠØª -->
    <div id="page5" class="page">
        <h1 id="voteMessage"></h1>
        <div class="instructions">
            <p>Ø§Ø®ØªØ± Ù…Ù† ØªØ¹ØªÙ‚Ø¯ Ø£Ù†Ù‡ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</p>
            <p id="remainingVotes"></p>
        </div>
        <div id="voteOptions"></div>
        <div id="selectedVote" style="margin: 20px; color: #0f0; font-size: 18px;"></div>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©: Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div id="page6" class="page">
        <h1>ğŸ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h1>
        <h2 id="imposterResult" class="imposter"></h2>
        
        <div class="instructions">
            <h3>ğŸ“Š Ù†Ù‚Ø§Ø· Ø§Ù„ØªØµÙˆÙŠØª</h3>
            <p>â€¢ Ù…Ù† ØµÙˆØª Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³: +100 Ù†Ù‚Ø·Ø©</p>
            <p>â€¢ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ø®Ù…Ù† Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„ØµØ­ÙŠØ­: +100 Ù†Ù‚Ø·Ø©</p>
        </div>
        
        <table class="results-table" id="resultsTable">
            <thead>
                <tr>
                    <th>ğŸ‘¤ Ø§Ù„Ù„Ø§Ø¹Ø¨</th>
                    <th>ğŸ… Ø§Ù„Ù†Ù‚Ø§Ø·</th>
                    <th>ğŸ“ Ø§Ù„ØªÙØ§ØµÙŠÙ„</th>
                </tr>
            </thead>
            <tbody id="resultsBody"></tbody>
        </table>
        <button onclick="restartGame()">ğŸ”„ Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
    </div>

    <script>
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¹Ø¨Ø©
        let players = [];
        let currentPlayerIndex = 0;
        let currentVoterIndex = 0;
        let votes = {};
        let scores = {};
        let locations = [
            'ğŸ¢ Ù…Ø·Ø§Ø±',
            'ğŸ¥ Ù…Ø³ØªØ´ÙÙ‰', 
            'ğŸ« Ù…Ø¯Ø±Ø³Ø©',
            'ğŸ¨ ÙÙ†Ø¯Ù‚',
            'ğŸ½ï¸ Ù…Ø·Ø¹Ù…',
            'ğŸ›’ Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª',
            'ğŸŒ³ Ø­Ø¯ÙŠÙ‚Ø©',
            'ğŸª Ø³Ø§Ø­Ø©',
            'ğŸ“š Ù…ÙƒØªØ¨Ø©',
            'ğŸ›ï¸ Ù…ØªØ­Ù',
            'ğŸ­ Ù…Ø³Ø±Ø­',
            'ğŸª ÙƒØ§ÙÙŠÙ‡',
            'âš½ Ù…Ù„Ø¹Ø¨',
            'ğŸ–ï¸ Ø´Ø§Ø·Ø¦',
            'ğŸ® Ù…Ø±ÙƒØ² Ø£Ù„Ø¹Ø§Ø¨'
        ];
        let specialLocation = '';
        let imposterIndex = -1;
        let gameState = 'playing';
        let voteSelections = {};
        let imposterGuess = '';

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØµÙØ­Ø©
window.onload = function() {
    loadSavedPlayers();
};
// Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙŠ LocalStorage
function savePlayersToStorage() {
    localStorage.setItem('spyGamePlayers', JSON.stringify(players));
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
function loadSavedPlayers() {
    const savedPlayers = localStorage.getItem('spyGamePlayers');
    if (savedPlayers) {
        players = JSON.parse(savedPlayers);
        updatePlayersList();
        document.getElementById('startGameBtn').disabled = players.length < 3;
    }
}

// Ù…Ø³Ø­ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
function clearSavedPlayers() {
    localStorage.removeItem('spyGamePlayers');
}
        
        // Ø¥Ø¶Ø§ÙØ© Ù„Ø§Ø¹Ø¨ Ø¬Ø¯ÙŠØ¯
        function addPlayer() {
            const input = document.getElementById('playerName');
            const name = input.value.trim();
            const error = document.getElementById('errorMessage');
            
            if (name === '') {
                error.textContent = 'âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…';
                error.style.display = 'block';
                return;
            }
            
            if (players.includes(name)) {
                error.textContent = 'âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹';
                error.style.display = 'block';
                return;
            }
            
            players.push(name);
            input.value = '';
            error.style.display = 'none';
            updatePlayersList();
            
            document.getElementById('startGameBtn').disabled = players.length < 3;
            function addPlayer() {
    // Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ...
    
    // Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯Ø§Ù„Ø©:
    savePlayersToStorage(); // Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
}
        }
        
        // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
       function updatePlayersList() {
    const list = document.getElementById('playersList');
    list.innerHTML = '';
    players.forEach((player, index) => {
        const li = document.createElement('li');
        li.innerHTML = `
            <span>ğŸ‘¤ ${player}</span>
            <button class="remove-player" onclick="removePlayer(${index})">Ã—</button>
        `;
        list.appendChild(li);
    });
}

// Ø¯Ø§Ù„Ø© Ø¥Ø²Ø§Ù„Ø© Ù„Ø§Ø¹Ø¨ Ù…Ø­Ø¯Ø¯
function removePlayer(index) {
    players.splice(index, 1);
    updatePlayersList();
    savePlayersToStorage(); // Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
    document.getElementById
    }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function startGame() {
            if (players.length < 3) {
                alert('Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† 3 Ø£Ø´Ø®Ø§Øµ');
                return;
            }
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
            currentPlayerIndex = 0;
            currentVoterIndex = 0;
            votes = {};
            scores = {};
            voteSelections = {};
            gameState = 'playing';
            imposterGuess = '';
            
            // ØªØ¹ÙŠÙŠÙ† Ù†Ù‚Ø§Ø· Ø£ÙˆÙ„ÙŠØ©
            players.forEach(player => {
                scores[player] = 0;
                votes[player] = 0;
            });
            
            // Ø§Ø®ØªÙŠØ§Ø± Ù…ÙƒØ§Ù† Ø®Ø§Øµ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
            specialLocation = locations[Math.floor(Math.random() * locations.length)];
            
            // Ø§Ø®ØªÙŠØ§Ø± Ø¬Ø§Ø³ÙˆØ³ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
            imposterIndex = Math.floor(Math.random() * players.length);
            
            showPage('page2');
            showPlayerTurn();
        }
        
        // Ø¹Ø±Ø¶ Ø¯ÙˆØ± Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ
        function showPlayerTurn() {
            const player = players[currentPlayerIndex];
            document.getElementById('currentPlayer').textContent = player;
        }
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„ØµÙØ­Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
        function nextPage() {
            if (gameState === 'playing') {
                showPage('page3');
                const player = players[currentPlayerIndex];
                
                if (currentPlayerIndex === imposterIndex) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù‡Ùˆ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
                    document.getElementById('locationMessage').innerHTML = 
                        'ğŸ‘¤ ÙŠØ§ <span class="imposter">' + player + '</span>';
                    
                    document.getElementById('locationContent').innerHTML = 
                        '<div class="imposter-text">ğŸ­ Ø£Ù†Øª Ø§Ù„Ø¬Ø§Ø³ÙˆØ³! ğŸ•µï¸â€â™‚ï¸</div>' +
                        '<div style="margin-top: 20px; color: #ff0; font-size: 18px;">' +
                        'âš ï¸ Ù„Ø§ ØªØ¹Ø±Ù Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø³Ø±ÙŠ<br>' +
                        'âš ï¸ Ø­Ø§ÙˆÙ„ Ø§ÙƒØªØ´Ø§ÙÙ‡ Ù…Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†<br>' +
                        'âš ï¸ Ù„Ø§ ØªØ¯Ø¹Ù‡Ù… ÙŠÙƒØªØ´ÙÙˆÙ†Ùƒ!' +
                        '</div>';
                    
                    document.getElementById('playerStatus').innerHTML = 
                        '<div class="status-badge imposter-badge">ğŸ­ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</div>';
                } else {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø¨Ø±ÙŠØ¦Ø§Ù‹
                    document.getElementById('locationMessage').innerHTML = 
                        'ğŸ‘¤ ÙŠØ§ <span class="innocent">' + player + '</span>';
                    
                    document.getElementById('locationContent').innerHTML = 
                        '<div class="innocent-text">âœ… Ø£Ù†Øª Ø¨Ø±ÙŠØ¡</div>' +
                        '<div style="margin-top: 20px; font-size: 22px;">' +
                        'ğŸ“ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø³Ø±ÙŠ:<br>' +
                        '<div style="color: #0ff; font-size: 28px; margin: 10px 0;">' + 
                        specialLocation + '</div>' +
                        'ğŸ” Ø­Ø§ÙˆÙ„ Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø¬Ø§Ø³ÙˆØ³!' +
                        '</div>';
                    
                    document.getElementById('playerStatus').innerHTML = 
                        '<div class="status-badge innocent-badge">âœ… Ø¨Ø±ÙŠØ¡</div>';
                }
            }
        }
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„ØªØ§Ù„ÙŠ
        function nextTurn() {
            currentPlayerIndex++;
            
            if (currentPlayerIndex < players.length) {
                showPage('page2');
                showPlayerTurn();
            } else {
                // Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
                showPage('page4');
            }
        }
        
        // Ø¨Ø¯Ø¡ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØµÙˆÙŠØª
        function startVotingPhase() {
            currentVoterIndex = 0;
            showPage('page5');
            showVotingOptions();
        }
        
        // Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµÙˆÙŠØª
        function showVotingOptions() {
            const voter = players[currentVoterIndex];
            document.getElementById('voteMessage').innerHTML = 
                'ğŸ—³ï¸ ÙŠØ§ <span style="color: #0ff">' + voter + '</span> ØªØµÙˆØª Ø¹Ù„Ù‰ Ù…Ù†ØŸ';
            
            const remaining = players.length - currentVoterIndex - 1;
            document.getElementById('remainingVotes').textContent = 
                'Ø¨Ø§Ù‚ÙŠ ' + remaining + ' Ù„Ø§Ø¹Ø¨ÙŠÙ† Ù„Ù„ØªØµÙˆÙŠØª';
            
            const optionsContainer = document.getElementById('voteOptions');
            optionsContainer.innerHTML = '';
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù…ØµÙˆØª Ø§Ù„Ø­Ø§Ù„ÙŠ
            const availablePlayers = players.filter(player => player !== voter);
            
            // ØªØ±ØªÙŠØ¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
            availablePlayers.sort(() => Math.random() - 0.5);
            
            // Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµÙˆÙŠØª
            availablePlayers.forEach(player => {
                const option = document.createElement('div');
                option.className = 'vote-option';
                option.innerHTML = 'ğŸ‘¤ ' + player;
                option.onclick = () => selectVote(player, voter);
                optionsContainer.appendChild(option);
            });
            
            document.getElementById('selectedVote').textContent = '';
        }
        
        // Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØª
        function selectVote(selectedPlayer, voter) {
            voteSelections[voter] = selectedPlayer;
            document.getElementById('selectedVote').innerHTML = 
                'âœ… Ø§Ø®ØªØ±Øª: <span style="color: #0ff">' + selectedPlayer + '</span>';
            
            // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©
            const continueBtn = document.createElement('button');
            continueBtn.textContent = 'ğŸ‘‰ Ø§Ù„ØªØ§Ù„ÙŠ';
            continueBtn.onclick = nextVoter;
            continueBtn.style.marginTop = '20px';
            
            const container = document.getElementById('voteOptions');
            if (!container.querySelector('button')) {
                container.appendChild(continueBtn);
            }
        }
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…ØµÙˆØª Ø§Ù„ØªØ§Ù„ÙŠ
        function nextVoter() {
            currentVoterIndex++;
            
            if (currentVoterIndex < players.length) {
                showVotingOptions();
            } else {
                // Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ø¹Ù† Ø§Ù„Ù…ÙƒØ§Ù†
                askImposterAboutLocation();
            }
        }
        
        // Ø³Ø¤Ø§Ù„ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ø¹Ù† ØªØ®Ù…ÙŠÙ†Ù‡ Ù„Ù„Ù…ÙƒØ§Ù†
        function askImposterAboutLocation() {
            const imposter = players[imposterIndex];
            showPage('page5');
            
            document.getElementById('voteMessage').innerHTML = 
                'ğŸ­ ÙŠØ§ <span class="imposter">' + imposter + '</span> (Ø§Ù„Ø¬Ø§Ø³ÙˆØ³)<br>' +
                'Ù…Ø§ Ù‡Ùˆ ØªØ®Ù…ÙŠÙ†Ùƒ Ù„Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø³Ø±ÙŠØŸ';
            
            document.getElementById('remainingVotes').textContent = 'Ø¢Ø®Ø± Ø®Ø·ÙˆØ© Ù‚Ø¨Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬';
            
            const optionsContainer = document.getElementById('voteOptions');
            optionsContainer.innerHTML = '';
            
            // Ø¹Ø±Ø¶ 5 Ø£Ù…Ø§ÙƒÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© (Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ)
            let locationOptions = [specialLocation];
            
            // Ø¥Ø¶Ø§ÙØ© 4 Ø£Ù…Ø§ÙƒÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø£Ø®Ø±Ù‰
            while (locationOptions.length < 5) {
                const randomLoc = locations[Math.floor(Math.random() * locations.length)];
                if (!locationOptions.includes(randomLoc)) {
                    locationOptions.push(randomLoc);
                }
            }
            
            // ØªØ±ØªÙŠØ¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
            locationOptions.sort(() => Math.random() - 0.5);
            
            // Ø¹Ø±Ø¶ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ù…Ø§ÙƒÙ†
            locationOptions.forEach(location => {
                const option = document.createElement('div');
                option.className = 'vote-option';
                option.innerHTML = 'ğŸ“ ' + location;
                option.onclick = () => selectLocationGuess(location, imposter);
                optionsContainer.appendChild(option);
            });
            
            document.getElementById('selectedVote').textContent = '';
        }
        
        // Ø§Ø®ØªÙŠØ§Ø± ØªØ®Ù…ÙŠÙ† Ø§Ù„Ù…ÙƒØ§Ù† Ù…Ù† Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
        function selectLocationGuess(location, imposter) {
            imposterGuess = location;
            document.getElementById('selectedVote').innerHTML = 
                'âœ… ØªØ®Ù…ÙŠÙ†Ùƒ: <span style="color: #0ff">' + location + '</span><br>' +
                '<span style="color:' + (location === specialLocation ? '#0f0' : '#f00') + '">' +
                (location === specialLocation ? 'ğŸ¯ ØµØ­ÙŠØ­!' : 'âŒ Ø®Ø·Ø£!') + '</span>';
            
            // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ù†ØªØ§Ø¦Ø¬
            const continueBtn = document.createElement('button');
            continueBtn.textContent = 'ğŸ† Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬';
            continueBtn.onclick = calculateAndShowResults;
            continueBtn.style.marginTop = '20px';
            
            const container = document.getElementById('voteOptions');
            if (!container.querySelector('button')) {
                container.appendChild(continueBtn);
            }
        }
        
        // Ø­Ø³Ø§Ø¨ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function calculateAndShowResults() {
            calculateResults();
            showPage('page6');
            displayResults();
        }
        
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function calculateResults() {
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ØµÙˆØ§Øª
            Object.values(voteSelections).forEach(votedPlayer => {
                votes[votedPlayer] = (votes[votedPlayer] || 0) + 1;
            });
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
            players.forEach(player => {
                // Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
                if (player === players[imposterIndex]) {
                    // Ø¥Ø°Ø§ Ø®Ù…Ù† Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„ØµØ­ÙŠØ­
                    if (imposterGuess === specialLocation) {
                        scores[player] += 100;
                    }
                } 
                // Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ† Ø§Ù„Ø¨Ø±Ø¦Ø§Ø¡
                else {
                    // Ø¥Ø°Ø§ ØµÙˆØªÙˆØ§ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
                    if (voteSelections[player] === players[imposterIndex]) {
                        scores[player] += 100;
                    }
                }
            });
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function displayResults() {
            const imposter = players[imposterIndex];
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³
            document.getElementById('imposterResult').innerHTML = 
                'ğŸ­ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³ Ù‡Ùˆ: <span class="imposter">' + imposter + '</span><br>' +
                '<div style="font-size: 18px; color: #ff0; margin-top: 10px;">' +
                'ğŸ“ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ø³Ø±ÙŠ ÙƒØ§Ù†: ' + specialLocation + '<br>' +
                'ğŸ¯ ØªØ®Ù…ÙŠÙ† Ø§Ù„Ø¬Ø§Ø³ÙˆØ³: ' + imposterGuess + ' ' +
                (imposterGuess === specialLocation ? 'âœ…' : 'âŒ') +
                '</div>';
            
            // Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            const resultsBody = document.getElementById('resultsBody');
            resultsBody.innerHTML = '';
            
            players.forEach(player => {
                const row = document.createElement('tr');
                
                const nameCell = document.createElement('td');
                nameCell.innerHTML = 'ğŸ‘¤ ' + player;
                if (player === imposter) {
                    nameCell.innerHTML += ' <span class="status-badge imposter-badge">ğŸ­ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³</span>';
                } else {
                    nameCell.innerHTML += ' <span class="status-badge innocent-badge">âœ… Ø¨Ø±ÙŠØ¡</span>';
                }
                
                const scoreCell = document.createElement('td');
                scoreCell.innerHTML = '<span style="font-size: 24px;">ğŸ… ' + scores[player] + '</span>';
                
                const detailsCell = document.createElement('td');
                if (player === imposter) {
                    detailsCell.innerHTML = 
                        'ğŸ­ Ø§Ù„Ø¬Ø§Ø³ÙˆØ³<br>' +
                        'ğŸ“ Ø®Ù…Ù†: ' + imposterGuess + '<br>' +
                        (imposterGuess === specialLocation ? 
                         'âœ… Ø­ØµÙ„ Ø¹Ù„Ù‰ 100 Ù†Ù‚Ø·Ø©' : 
                         'âŒ Ù„Ù… ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø·');
                } else {
                    const votedFor = voteSelections[player];
                    detailsCell.innerHTML = 
                        'âœ… Ø¨Ø±ÙŠØ¡<br>' +
                        'ğŸ—³ï¸ ØµÙˆØª Ø¹Ù„Ù‰: ' + votedFor + '<br>' +
                        (votedFor === imposter ? 
                         'âœ… Ø­ØµÙ„ Ø¹Ù„Ù‰ 100 Ù†Ù‚Ø·Ø©' : 
                         'âŒ Ù„Ù… ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø·');
                }
                
                row.appendChild(nameCell);
                row.appendChild(scoreCell);
                row.appendChild(detailsCell);
                resultsBody.appendChild(row);
            });
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function restartGame() {
            
            updatePlayersList();
            showPage('page1');
            document.getElementById('startGameBtn').disabled = true;
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active-page');
            });
            document.getElementById(pageId).classList.add('active-page');
        }
        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
function clearAllPlayers() {
    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ØŸ')) {
        players = [];
        updatePlayersList();
        document.getElementById('startGameBtn').disabled = true;
        clearSavedPlayers(); // Ù…Ø³Ø­ Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø£ÙŠØ¶Ø§Ù‹
    }
}
    </script>
</body>
</html>